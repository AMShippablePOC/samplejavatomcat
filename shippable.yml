language: java

jdk:
  - oraclejdk8

branches:
  only:
    - master

env:
  global:
    - secure: H1YNlm3zIEGPHjHJJd99v/6Jsk7UFpgY750+8fUg/384LPUi7W/7aEvWTetZLQUMiXT1QsFTP0+sVxoJaDwOvKtJA191KNLsiQwj69Y5yuxncEwsWsIokwde0DfEA9/wESCFc5inUDps7NkezbgjKpKCHE8RroaIrY9IkHGN18S94Hhbd4WuBKFh6sCXXOHHzK/f/c/9Qwya6YdIyUEXFhZVBUcqGpZuAEyBBffugEhXUwxexCvQ6hNcm0rgqEkM7JqvFa8S9TcyUxGAluJ1LNdBMpoVIlsejTqlPPzRcw+NiUdcuFQ9QHqrkQubzUHP/vphqVrSVXzhbfm1khONnw==

build:
  ci:
    - mkdir -p shippable/testresults
    - sed -i "s/{PASSWORD}/$PASSWORD/" .m2/settings.xml
    - mvn -q -B -s .m2/settings.xml -U clean cobertura:cobertura deploy
    - docker build -t ttrahan/javahelloworld:$BRANCH.$BUILD_NUMBER .
    - docker push ttrahan/javahelloworld:$BRANCH.$BUILD_NUMBER

integrations:
  hub:
    - integrationName: ttrahan-dh
      type: docker
